<%- include ("partials/header"); %>


<div class="contained">
    <form class="form" action="/<%= animal._id %>?_method=PUT" method="POST">
       <div class="form-group">
           <label>Pet ID</label>
           <input type="text" name="animal[petId]" value="<%= animal.petId %>">
       </div>

       
       <div class="form-group">
        <label>Species</label>
            <select name="animal[species]" id="species" onchange="changeMeds()">
                <option value="cat" <%= animal.species === "cat" ? "selected" : "" %>  >Cat</option>
                <option value="dog" <%= animal.species === "dog" ? "selected" : "" %> >Dog</option>
                <option value="other" <%= animal.species === "other" ? "selected" : "" %> >Other</option>
            </select>

        </div>
        <div class="form-group">
            <label>Name</label>
            <input type="text" name="animal[name]" value="<%= animal.name %>">
        </div>
        <div class="form-group">
            <label>Sex</label>
            <input type="text" name="animal[sex]" value="<%= animal.sex %>">
        </div>
        <div class="form-group">
            <label>Breed</label>
            <input type="text" name="animal[breed]" value="<%= animal.breed %>">
        </div>
        <div class="form-group">
            <label>Age</label>
            <input type="text" name="animal[age]" value="<%= animal.age %>">
        </div>
        <div class="form-group">
            <label>Intake Date</label>
            <input type="date" name="animal[intake]" value="<%= animal.intake %> ">
        </div>
        <div class="form-group">
            <label>Altered?</label>
            <select class="form-control" name="animal[altered]">
                <option>Yes</option>
                <option>No</option>
            </select>
        </div>
        <div class="form-group">
            <label>Altered Date</label>
            <input type="date" name="animal[alteredDate]" value="<%= animal.alteredDate %>">
        </div>

        <div id="cat">
            
            <div class="form-group">
                <label>FVRCP 1</label>
                <select type="text" name="animal[fvrcp1]"> 
                    <option value="false" <%= animal.fvrcp1 === false ? "selected" : "" %>>No</option>
                    <option value="true" <%= animal.fvrcp1 === true ? "selected" : "" %> >Yes</option>
                </select>
            </div>

            <div class="form-group">
                <label>FVRCP 2</label>
                <select type="text" name="animal[fvrcp2]"> 
                    <option value="false" <%= animal.fvrcp2 === false ? "selected" : "" %> >No</option>
                    <option value="true" <%= animal.fvrcp2 === true ? "selected" : "" %> >Yes</option>
                </select>
            </div>

            <div class="form-group">
                <label>Feline Leukemia</label>
                <select type="text" name="animal[felineLeukemia]"> 
                    <option value="false" <%= animal.felineLeukemia === false ? "selected" : "" %> >No</option>
                    <option value="true" <%= animal.felineLeukemia === true ? "selected" : "" %> >Yes</option>
                </select>
            </div>
        </div>

        <div id="dog">
            <p>Dog Meds will go here</p>
        </div>

        <div class="form-group">
            <label>Rabies</label>
            <select type="text" name="animal[rabies]"> 
                <option value="false" <%= animal.rabies === false ? "selected" : "" %> >No</option>
                <option value="true" <%= animal.rabies === true ? "selected" : "" %> >Yes</option>
            </select>
        </div>


        <div class="form-group">
            <label>Comments</label>
            <textarea class="form-control" rows="3" name="animal[body]" value="<%= animal.body %>"></textarea>
        </div>
        <input class="btn btn-dark" type="submit">
    </form>  
</div>

<%- include ("partials/footer") %>




<script>

    const cat = document.getElementById('cat');
    const dog = document.getElementById('dog');
    const species = document.getElementById('species');


    function selectElement (id, valueToSelect){
        let element = document.getElementById(id);
        element.value = valueToSelect;
    }

    window.onload = changeMeds();


    function changeMeds(){
        
        if(species.value == 'cat'){
            cat.style.display = 'block';
        } 
        else{
            cat.style.display = 'none';
        }

        if(species.value == 'dog'){
            dog.style.display = 'block';
        }
        else{
            dog.style.display = 'none';
        }
    }


    

    

</script>